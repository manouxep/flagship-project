{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useFlagship = exports.useFsModifications = exports.useFsActivate = void 0;\n\nvar react_1 = require(\"react\");\n\nvar FlagshipContext_1 = __importDefault(require(\"./FlagshipContext\"));\n\nvar reportNoVisitor = function reportNoVisitor(log) {\n  if (log) {\n    log.error('sdk not correctly initialized... Make sure fsVisitor is ready.');\n  }\n};\n\nvar safeModeLog = function safeModeLog(log, functionName) {\n  if (log) {\n    log.error(functionName + \" is disabled because the SDK is in safe mode.\");\n  }\n};\n\nexports.useFsActivate = function (modificationKeys, applyEffectScope) {\n  if (applyEffectScope === void 0) {\n    applyEffectScope = [];\n  }\n\n  var _a = react_1.useContext(FlagshipContext_1.default),\n      state = _a.state,\n      hasError = _a.hasError;\n\n  react_1.useEffect(function () {\n    var fsVisitor = state.fsVisitor;\n\n    if (hasError) {\n      return safeModeLog(state.log, 'UseFsActivate');\n    }\n\n    if (!fsVisitor) {\n      reportNoVisitor(state.log);\n    } else {\n      fsVisitor.activateModifications(modificationKeys.map(function (key) {\n        return {\n          key: key\n        };\n      }));\n    }\n\n    return undefined;\n  }, applyEffectScope);\n};\n\nvar safeMode_getCacheModifications = function safeMode_getCacheModifications(modificationsRequested, activateAllModifications) {\n  if (activateAllModifications === void 0) {\n    activateAllModifications = false;\n  }\n\n  return modificationsRequested.reduce(function (reducer, modifRequested) {\n    var newReducer = __assign({}, reducer);\n\n    newReducer[modifRequested.key] = modifRequested.defaultValue;\n    return newReducer;\n  }, {});\n};\n\nvar getCacheModifications = function getCacheModifications(fsVisitor, modificationsRequested, activateAllModifications, log) {\n  if (activateAllModifications === void 0) {\n    activateAllModifications = false;\n  }\n\n  if (!fsVisitor) {\n    if (log) {\n      log.warn('fsVisitor not initialized, returns default value');\n    }\n\n    return safeMode_getCacheModifications(modificationsRequested, activateAllModifications);\n  }\n\n  return fsVisitor.getModifications(modificationsRequested, activateAllModifications);\n};\n\nexports.useFsModifications = function (modificationsRequested, activateAllModifications) {\n  if (activateAllModifications === void 0) {\n    activateAllModifications = false;\n  }\n\n  var _a = react_1.useContext(FlagshipContext_1.default),\n      _b = _a.state,\n      fsVisitor = _b.fsVisitor,\n      log = _b.log,\n      hasError = _a.hasError;\n\n  if (hasError) {\n    return safeMode_getCacheModifications(modificationsRequested, activateAllModifications);\n  }\n\n  return getCacheModifications(fsVisitor, modificationsRequested, activateAllModifications, log);\n};\n\nexports.useFlagship = function (options) {\n  var computedOptions = options ? options : {\n    modifications: {\n      requested: [],\n      activateAll: false\n    }\n  };\n  var _a = computedOptions.modifications,\n      modificationsRequested = _a.requested,\n      _b = _a.activateAll,\n      activateAllModifications = _b === void 0 ? false : _b;\n\n  var _c = react_1.useContext(FlagshipContext_1.default),\n      hasError = _c.hasError,\n      setState = _c.setState,\n      _d = _c.state,\n      fsSdk = _d.fsSdk,\n      fsVisitor = _d.fsVisitor,\n      status = _d.status,\n      log = _d.log;\n\n  if (hasError) {\n    return {\n      modifications: safeMode_getCacheModifications(modificationsRequested, activateAllModifications),\n      status: status,\n      synchronizeModifications: function synchronizeModifications(activate) {\n        if (activate === void 0) {\n          activate = false;\n        }\n\n        safeModeLog(log, 'synchronizeModifications');\n        return new Promise(function (resolve) {\n          return resolve(400);\n        });\n      },\n      getModificationInfo: function getModificationInfo() {\n        safeModeLog(log, 'getModificationInfo');\n        return new Promise(function (resolve) {\n          return resolve(null);\n        });\n      },\n      startBucketingPolling: function startBucketingPolling() {\n        safeModeLog(log, 'startBucketingPolling');\n        return {\n          success: false,\n          reason: 'Safe mode enabled'\n        };\n      },\n      stopBucketingPolling: function stopBucketingPolling() {\n        safeModeLog(log, 'startBucketingPolling');\n        return {\n          success: false,\n          reason: 'Safe mode enabled'\n        };\n      },\n      hit: {\n        send: function send() {\n          safeModeLog(log, 'send hit');\n        },\n        sendMultiple: function sendMultiple() {\n          safeModeLog(log, 'send multiple hits');\n        }\n      }\n    };\n  }\n\n  var logSdkNotReady = function logSdkNotReady() {\n    if (log) {\n      log.error('SDK not ready yet.');\n    }\n  };\n\n  var send = function send(hit) {\n    if (fsVisitor && fsVisitor.sendHit) {\n      fsVisitor.sendHit(hit);\n    } else {\n      logSdkNotReady();\n    }\n  };\n\n  var sendMultiple = function sendMultiple(hits) {\n    if (fsVisitor && fsVisitor.sendHits) {\n      fsVisitor.sendHits(hits);\n    } else {\n      logSdkNotReady();\n    }\n  };\n\n  var synchronizeModifications = function synchronizeModifications(activate) {\n    if (activate === void 0) {\n      activate = false;\n    }\n\n    if (fsVisitor && fsVisitor.synchronizeModifications) {\n      return fsVisitor.synchronizeModifications(activate).then(function (data) {\n        if (setState) {\n          setState(function (s) {\n            return __assign(__assign({}, s), {\n              fsModifications: fsVisitor.fetchedModifications\n            });\n          });\n        }\n\n        return data;\n      });\n    }\n\n    logSdkNotReady();\n    return new Promise(function (resolve) {\n      return resolve(405);\n    });\n  };\n\n  send.bind(fsVisitor);\n  sendMultiple.bind(fsVisitor);\n  return {\n    synchronizeModifications: synchronizeModifications,\n    modifications: getCacheModifications(fsVisitor, modificationsRequested, activateAllModifications, log),\n    getModificationInfo: function getModificationInfo(key) {\n      return fsVisitor !== null ? fsVisitor.getModificationInfo(key) : new Promise(function (resolve) {\n        return resolve(null);\n      });\n    },\n    startBucketingPolling: function startBucketingPolling() {\n      if (fsSdk) {\n        return fsSdk.startBucketingPolling();\n      }\n\n      if (log) {\n        log.error('startBucketingPolling not ready yet.');\n      }\n\n      return {\n        success: false,\n        reason: 'startBucketingPolling not ready yet.'\n      };\n    },\n    stopBucketingPolling: function stopBucketingPolling() {\n      if (fsSdk) {\n        return fsSdk.stopBucketingPolling();\n      }\n\n      if (log) {\n        log.error('stopBucketingPolling not ready yet.');\n      }\n\n      return {\n        success: false,\n        reason: 'startBucketingPolling not ready yet.'\n      };\n    },\n    status: status,\n    hit: {\n      send: send,\n      sendMultiple: sendMultiple\n    }\n  };\n};","map":{"version":3,"sources":["../src/FlagshipHooks.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useFlagship = exports.useFsModifications = exports.useFsActivate = void 0;\nvar react_1 = require(\"react\");\nvar FlagshipContext_1 = __importDefault(require(\"./FlagshipContext\"));\nvar reportNoVisitor = function (log) {\n    if (log) {\n        log.error('sdk not correctly initialized... Make sure fsVisitor is ready.');\n    }\n};\nvar safeModeLog = function (log, functionName) {\n    if (log) {\n        log.error(functionName + \" is disabled because the SDK is in safe mode.\");\n    }\n};\nexports.useFsActivate = function (modificationKeys, applyEffectScope) {\n    if (applyEffectScope === void 0) { applyEffectScope = []; }\n    var _a = react_1.useContext(FlagshipContext_1.default), state = _a.state, hasError = _a.hasError;\n    react_1.useEffect(function () {\n        var fsVisitor = state.fsVisitor;\n        if (hasError) {\n            return safeModeLog(state.log, 'UseFsActivate');\n        }\n        if (!fsVisitor) {\n            reportNoVisitor(state.log);\n        }\n        else {\n            fsVisitor.activateModifications(modificationKeys.map(function (key) { return ({ key: key }); }));\n        }\n        return undefined;\n    }, applyEffectScope);\n};\nvar safeMode_getCacheModifications = function (modificationsRequested, activateAllModifications) {\n    if (activateAllModifications === void 0) { activateAllModifications = false; }\n    return modificationsRequested.reduce(function (reducer, modifRequested) {\n        var newReducer = __assign({}, reducer);\n        newReducer[modifRequested.key] = modifRequested.defaultValue;\n        return newReducer;\n    }, {});\n};\nvar getCacheModifications = function (fsVisitor, modificationsRequested, activateAllModifications, log) {\n    if (activateAllModifications === void 0) { activateAllModifications = false; }\n    if (!fsVisitor) {\n        if (log) {\n            log.warn('fsVisitor not initialized, returns default value');\n        }\n        return safeMode_getCacheModifications(modificationsRequested, activateAllModifications);\n    }\n    return fsVisitor.getModifications(modificationsRequested, activateAllModifications);\n};\nexports.useFsModifications = function (modificationsRequested, activateAllModifications) {\n    if (activateAllModifications === void 0) { activateAllModifications = false; }\n    var _a = react_1.useContext(FlagshipContext_1.default), _b = _a.state, fsVisitor = _b.fsVisitor, log = _b.log, hasError = _a.hasError;\n    if (hasError) {\n        return safeMode_getCacheModifications(modificationsRequested, activateAllModifications);\n    }\n    return getCacheModifications(fsVisitor, modificationsRequested, activateAllModifications, log);\n};\nexports.useFlagship = function (options) {\n    var computedOptions = options\n        ? options\n        : {\n            modifications: { requested: [], activateAll: false }\n        };\n    var _a = computedOptions.modifications, modificationsRequested = _a.requested, _b = _a.activateAll, activateAllModifications = _b === void 0 ? false : _b;\n    var _c = react_1.useContext(FlagshipContext_1.default), hasError = _c.hasError, setState = _c.setState, _d = _c.state, fsSdk = _d.fsSdk, fsVisitor = _d.fsVisitor, status = _d.status, log = _d.log;\n    if (hasError) {\n        return {\n            modifications: safeMode_getCacheModifications(modificationsRequested, activateAllModifications),\n            status: status,\n            synchronizeModifications: function (activate) {\n                if (activate === void 0) { activate = false; }\n                safeModeLog(log, 'synchronizeModifications');\n                return new Promise(function (resolve) { return resolve(400); });\n            },\n            getModificationInfo: function () {\n                safeModeLog(log, 'getModificationInfo');\n                return new Promise(function (resolve) { return resolve(null); });\n            },\n            startBucketingPolling: function () {\n                safeModeLog(log, 'startBucketingPolling');\n                return {\n                    success: false,\n                    reason: 'Safe mode enabled'\n                };\n            },\n            stopBucketingPolling: function () {\n                safeModeLog(log, 'startBucketingPolling');\n                return {\n                    success: false,\n                    reason: 'Safe mode enabled'\n                };\n            },\n            hit: {\n                send: function () {\n                    safeModeLog(log, 'send hit');\n                },\n                sendMultiple: function () {\n                    safeModeLog(log, 'send multiple hits');\n                }\n            }\n        };\n    }\n    var logSdkNotReady = function () {\n        if (log) {\n            log.error('SDK not ready yet.');\n        }\n    };\n    var send = function (hit) {\n        if (fsVisitor && fsVisitor.sendHit) {\n            fsVisitor.sendHit(hit);\n        }\n        else {\n            logSdkNotReady();\n        }\n    };\n    var sendMultiple = function (hits) {\n        if (fsVisitor && fsVisitor.sendHits) {\n            fsVisitor.sendHits(hits);\n        }\n        else {\n            logSdkNotReady();\n        }\n    };\n    var synchronizeModifications = function (activate) {\n        if (activate === void 0) { activate = false; }\n        if (fsVisitor && fsVisitor.synchronizeModifications) {\n            return fsVisitor.synchronizeModifications(activate).then(function (data) {\n                if (setState) {\n                    setState(function (s) { return (__assign(__assign({}, s), { fsModifications: fsVisitor.fetchedModifications })); });\n                }\n                return data;\n            });\n        }\n        logSdkNotReady();\n        return new Promise(function (resolve) { return resolve(405); });\n    };\n    send.bind(fsVisitor);\n    sendMultiple.bind(fsVisitor);\n    return {\n        synchronizeModifications: synchronizeModifications,\n        modifications: getCacheModifications(fsVisitor, modificationsRequested, activateAllModifications, log),\n        getModificationInfo: function (key) {\n            return fsVisitor !== null\n                ? fsVisitor.getModificationInfo(key)\n                : new Promise(function (resolve) { return resolve(null); });\n        },\n        startBucketingPolling: function () {\n            if (fsSdk) {\n                return fsSdk.startBucketingPolling();\n            }\n            if (log) {\n                log.error('startBucketingPolling not ready yet.');\n            }\n            return {\n                success: false,\n                reason: 'startBucketingPolling not ready yet.'\n            };\n        },\n        stopBucketingPolling: function () {\n            if (fsSdk) {\n                return fsSdk.stopBucketingPolling();\n            }\n            if (log) {\n                log.error('stopBucketingPolling not ready yet.');\n            }\n            return {\n                success: false,\n                reason: 'startBucketingPolling not ready yet.'\n            };\n        },\n        status: status,\n        hit: {\n            send: send,\n            sendMultiple: sendMultiple\n        }\n    };\n};\n//# sourceMappingURL=FlagshipHooks.js.map"]},"metadata":{},"sourceType":"script"}