{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar ReactErrorBoundaryContainer_1 = __importDefault(require(\"./components/ReactErrorBoundaryContainer\"));\n\nvar FlagshipErrorBoundary = function (_super) {\n  __extends(FlagshipErrorBoundary, _super);\n\n  function FlagshipErrorBoundary(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      error: _this.props.error,\n      errorInfo: null,\n      isCollapse: false\n    };\n    return _this;\n  }\n\n  FlagshipErrorBoundary.prototype.componentDidCatch = function (error, errorInfo) {\n    var isSafeModeEnabled = this.props.sdkSettings.enableSafeMode;\n\n    if (isSafeModeEnabled) {\n      this.props.log.fatal(\"An error occurred. The SDK is switching into safe mode:\\n\" + error.stack);\n      this.setState({\n        error: error,\n        errorInfo: errorInfo\n      });\n    }\n  };\n\n  FlagshipErrorBoundary.getDerivedStateFromError = function (error) {\n    return {\n      error: error\n    };\n  };\n\n  FlagshipErrorBoundary.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var isSafeModeEnabled = this.props.sdkSettings.enableSafeMode;\n\n    if (isSafeModeEnabled) {\n      if (this.state.error !== prevState.error) {\n        this.props.onError(this.state.error);\n      }\n\n      if (this.props.error !== prevProps.error) {\n        this.props.log.fatal(\"An error occurred. The SDK is switching into safe mode:\\n\" + this.props.error.stack);\n      }\n    }\n  };\n\n  FlagshipErrorBoundary.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.state,\n        error = _a.error,\n        isCollapse = _a.isCollapse;\n    var _b = this.props,\n        children = _b.children,\n        handleDisplay = _b.handleDisplay,\n        customerChildren = _b.customerChildren,\n        errorProp = _b.error,\n        _c = _b.sdkSettings,\n        nodeEnv = _c.nodeEnv,\n        enableErrorLayout = _c.enableErrorLayout,\n        enableSafeMode = _c.enableSafeMode;\n\n    if (enableSafeMode && (errorProp || error)) {\n      var errorCopy = errorProp || error;\n\n      if (handleDisplay) {\n        return handleDisplay({\n          children: children,\n          debugMode: nodeEnv !== 'production' && !!enableErrorLayout,\n          isCollapse: isCollapse,\n          error: errorCopy,\n          onClickCollapse: function onClickCollapse() {\n            _this.setState(__assign(__assign({}, _this.state), {\n              isCollapse: !isCollapse\n            }));\n          }\n        });\n      }\n\n      return react_1.default.createElement(ReactErrorBoundaryContainer_1.default, {\n        debugMode: nodeEnv !== 'production' && !!enableErrorLayout,\n        isCollapse: isCollapse,\n        error: errorCopy,\n        onClickCollapse: function onClickCollapse() {\n          _this.setState(__assign(__assign({}, _this.state), {\n            isCollapse: !isCollapse\n          }));\n        }\n      }, customerChildren);\n    }\n\n    return children;\n  };\n\n  return FlagshipErrorBoundary;\n}(react_1.default.Component);\n\nexports.default = FlagshipErrorBoundary;","map":{"version":3,"sources":["../src/FlagshipErrorBoundary.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar ReactErrorBoundaryContainer_1 = __importDefault(require(\"./components/ReactErrorBoundaryContainer\"));\nvar FlagshipErrorBoundary = (function (_super) {\n    __extends(FlagshipErrorBoundary, _super);\n    function FlagshipErrorBoundary(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            error: _this.props.error,\n            errorInfo: null,\n            isCollapse: false\n        };\n        return _this;\n    }\n    FlagshipErrorBoundary.prototype.componentDidCatch = function (error, errorInfo) {\n        var isSafeModeEnabled = this.props.sdkSettings.enableSafeMode;\n        if (isSafeModeEnabled) {\n            this.props.log.fatal(\"An error occurred. The SDK is switching into safe mode:\\n\" + error.stack);\n            this.setState({\n                error: error,\n                errorInfo: errorInfo\n            });\n        }\n    };\n    FlagshipErrorBoundary.getDerivedStateFromError = function (error) {\n        return {\n            error: error\n        };\n    };\n    FlagshipErrorBoundary.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var isSafeModeEnabled = this.props.sdkSettings.enableSafeMode;\n        if (isSafeModeEnabled) {\n            if (this.state.error !== prevState.error) {\n                this.props.onError(this.state.error);\n            }\n            if (this.props.error !== prevProps.error) {\n                this.props.log.fatal(\"An error occurred. The SDK is switching into safe mode:\\n\" + this.props.error.stack);\n            }\n        }\n    };\n    FlagshipErrorBoundary.prototype.render = function () {\n        var _this = this;\n        var _a = this.state, error = _a.error, isCollapse = _a.isCollapse;\n        var _b = this.props, children = _b.children, handleDisplay = _b.handleDisplay, customerChildren = _b.customerChildren, errorProp = _b.error, _c = _b.sdkSettings, nodeEnv = _c.nodeEnv, enableErrorLayout = _c.enableErrorLayout, enableSafeMode = _c.enableSafeMode;\n        if (enableSafeMode && (errorProp || error)) {\n            var errorCopy = errorProp || error;\n            if (handleDisplay) {\n                return handleDisplay({\n                    children: children,\n                    debugMode: nodeEnv !== 'production' && !!enableErrorLayout,\n                    isCollapse: isCollapse,\n                    error: errorCopy,\n                    onClickCollapse: function () {\n                        _this.setState(__assign(__assign({}, _this.state), { isCollapse: !isCollapse }));\n                    }\n                });\n            }\n            return (react_1.default.createElement(ReactErrorBoundaryContainer_1.default, { debugMode: nodeEnv !== 'production' && !!enableErrorLayout, isCollapse: isCollapse, error: errorCopy, onClickCollapse: function () {\n                    _this.setState(__assign(__assign({}, _this.state), { isCollapse: !isCollapse }));\n                } }, customerChildren));\n        }\n        return children;\n    };\n    return FlagshipErrorBoundary;\n}(react_1.default.Component));\nexports.default = FlagshipErrorBoundary;\n//# sourceMappingURL=FlagshipErrorBoundary.js.map"]},"metadata":{},"sourceType":"script"}